local AdminPanelServerScripts = Instance.new("Folder")
AdminPanelServerScripts.Name = "AdminPanelServerScripts"

local BanRemoteEvent = Instance.new("Script")
BanRemoteEvent.Name = "BanRemoteEvent"
BanRemoteEvent.Source = "local ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\nif not ReplicatedStorage:FindFirstChild(\"BanPlayer\") then\n\tlocal banEvent = Instance.new(\"RemoteEvent\")\n\tbanEvent.Name = \"BanPlayer\"\n\tbanEvent.Parent = ReplicatedStorage\nend\n\nif not ReplicatedStorage:FindFirstChild(\"PermBanPlayer\") then\n\tlocal permBanEvent = Instance.new(\"RemoteEvent\")\n\tpermBanEvent.Name = \"PermBanPlayer\"\n\tpermBanEvent.Parent = ReplicatedStorage\nend\n\nif not ReplicatedStorage:FindFirstChild(\"UnbanPlayer\") then\n\tlocal unbanEvent = Instance.new(\"RemoteEvent\")\n\tunbanEvent.Name = \"UnbanPlayer\"\n\tunbanEvent.Parent = ReplicatedStorage\nend"
BanRemoteEvent.Parent = AdminPanelServerScripts

local HandleMessages = Instance.new("Script")
HandleMessages.Name = "HandleMessages"
HandleMessages.Source = "local RS = game:GetService(\"ReplicatedStorage\")\nlocal Players = game:GetService(\"Players\")\nlocal MessagingService = game:GetService(\"MessagingService\")\n\nlocal function getOrCreateEvent(name)\n\tlocal evt = RS:FindFirstChild(name)\n\tif not evt then\n\t\tevt = Instance.new(\"RemoteEvent\")\n\t\tevt.Name = name\n\t\tevt.Parent = RS\n\tend\n\treturn evt\nend\n\nlocal BroadcastEvent = getOrCreateEvent(\"BroadcastMessage\")\nlocal PrivateEvent   = getOrCreateEvent(\"PrivateMessage\")\nlocal GlobalEvent    = getOrCreateEvent(\"GlobalMessage\")\n\nBroadcastEvent.OnServerEvent:Connect(function(player, msg)\n\tif type(msg)==\"string\" and #msg>0 then\n\t\tfor _, pl in ipairs(Players:GetPlayers()) do\n\t\t\tBroadcastEvent:FireClient(pl, player.Name, msg)\n\t\tend\n\telse\n\t\twarn(\"Empty broadcast from\", player.Name)\n\tend\nend)\n\nPrivateEvent.OnServerEvent:Connect(function(player, targetName, msg)\n\tlocal target = Players:FindFirstChild(targetName)\n\tif target and type(msg)==\"string\" and #msg>0 then\n\t\tPrivateEvent:FireClient(target, player.Name, msg)\n\telse\n\t\twarn(\"Invalid private message from\", player.Name)\n\tend\nend)\n\nMessagingService:SubscribeAsync(\"GlobalChannel\", function(data)\n\tif type(data)==\"table\" and data.Sender and data.Message then\n\t\tfor _, pl in ipairs(Players:GetPlayers()) do\n\t\t\tGlobalEvent:FireClient(pl, data.Sender, data.Message)\n\t\tend\n\tend\nend)\n\nGlobalEvent.OnServerEvent:Connect(function(player, msg)\n\tif type(msg)==\"string\" and #msg>0 then\n\t\tpcall(function()\n\t\t\tMessagingService:PublishAsync(\"GlobalChannel\", {Sender=player.Name, Message=msg})\n\t\tend)\n\telse\n\t\twarn(\"Empty global message from\", player.Name)\n\tend\nend)"
HandleMessages.Parent = AdminPanelServerScripts

local HandleBans = Instance.new("Script")
HandleBans.Name = "HandleBans"
HandleBans.Source = "local Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal DataStoreService = game:GetService(\"DataStoreService\")\nlocal banStore = DataStoreService:GetDataStore(\"BannedPlayers\")\n\nlocal banEvent = ReplicatedStorage:WaitForChild(\"BanPlayer\")\nlocal permBanEvent = ReplicatedStorage:WaitForChild(\"PermBanPlayer\")\nlocal unbanEvent = ReplicatedStorage:WaitForChild(\"UnbanPlayer\")\n\n-- Save temp ban info\nbanEvent.OnServerEvent:Connect(function(adminPlayer, targetName, reason, duration)\n\tprint(\"Received temp ban from:\", adminPlayer.Name, \"target:\", targetName)\n\tlocal target = Players:FindFirstChild(targetName)\n\tlocal endTime = os.time() + (duration * 3600)\n\n\tlocal banData = {\n\t\treason = reason,\n\t\tunbanTime = endTime\n\t}\n\n\tpcall(function()\n\t\tbanStore:SetAsync(targetName, banData)\n\tend)\n\n\tif target then\n\t\tlocal banMessage = reason ~= \"\" and reason or \"You have been banned.\"\n\t\tbanMessage = banMessage .. \"\\nBan duration: \" .. tostring(duration) .. \" hour(s).\"\n\t\tpcall(function()\n\t\t\ttarget:Kick(banMessage)\n\t\tend)\n\tend\nend)\n\n-- Save permanent ban info\npermBanEvent.OnServerEvent:Connect(function(adminPlayer, targetName, reason)\n\tprint(\"Received perm ban from:\", adminPlayer.Name, \"target:\", targetName)\n\tlocal target = Players:FindFirstChild(targetName)\n\n\tlocal banData = {\n\t\treason = reason,\n\t\tunbanTime = math.huge -- represents a permanent ban\n\t}\n\n\tpcall(function()\n\t\tbanStore:SetAsync(targetName, banData)\n\tend)\n\n\tif target then\n\t\tlocal banMessage = reason ~= \"\" and reason or \"You have been permanently banned.\"\n\t\tpcall(function()\n\t\t\ttarget:Kick(banMessage)\n\t\tend)\n\tend\nend)\n\n-- Unban player\nunbanEvent.OnServerEvent:Connect(function(adminPlayer, targetName)\n\tprint(\"Unban request from:\", adminPlayer.Name, \"target:\", targetName)\n\tpcall(function()\n\t\tbanStore:RemoveAsync(targetName)\n\tend)\nend)\n\n-- Kick player if still banned\nPlayers.PlayerAdded:Connect(function(player)\n\tlocal success, banData = pcall(function()\n\t\treturn banStore:GetAsync(player.Name)\n\tend)\n\n\tif success and banData and typeof(banData) == \"table\" then\n\t\tif os.time() < banData.unbanTime or banData.unbanTime == math.huge then\n\t\t\tlocal message\n\t\t\tif banData.unbanTime == math.huge then\n\t\t\t\tmessage = (banData.reason or \"You are permanently banned.\")\n\t\t\telse\n\t\t\t\tlocal remaining = math.max(0, math.ceil((banData.unbanTime - os.time()) / 60))\n\t\t\t\tmessage = (banData.reason or \"You are banned.\") ..\n\t\t\t\t\t\"\\nYou can rejoin in \" .. remaining .. \" minute(s).\"\n\t\t\tend\n\t\t\tpcall(function()\n\t\t\t\tplayer:Kick(message)\n\t\t\tend)\n\t\telse\n\t\t\tpcall(function()\n\t\t\t\tbanStore:RemoveAsync(player.Name)\n\t\t\tend)\n\t\tend\n\tend\nend)\n"
HandleBans.Parent = AdminPanelServerScripts

local ClientSideExecutions = Instance.new("Script")
ClientSideExecutions.Name = "ClientSideExecutions"
ClientSideExecutions.Source = "local Players = game:GetService(\"Players\")\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\n\n-- Create a RemoteEvent in ReplicatedStorage for teleport requests\nlocal teleportEvent = Instance.new(\"RemoteEvent\")\nteleportEvent.Name = \"TeleportRequest\"\nteleportEvent.Parent = ReplicatedStorage\n\nteleportEvent.OnServerEvent:Connect(function(player, fromName, toName)\n\tlocal fromPlayer = Players:FindFirstChild(fromName)\n\tlocal toPlayer = Players:FindFirstChild(toName)\n\n\tif not fromPlayer then\n\t\twarn(\"Teleport failed: fromPlayer (\" .. fromName .. \") not found.\")\n\t\treturn\n\tend\n\tif not toPlayer then\n\t\twarn(\"Teleport failed: toPlayer (\" .. toName .. \") not found.\")\n\t\treturn\n\tend\n\tif not fromPlayer.Character or not toPlayer.Character then\n\t\twarn(\"Teleport failed: one or both players have no Character.\")\n\t\treturn\n\tend\n\n\tlocal fromHRP = fromPlayer.Character:FindFirstChild(\"HumanoidRootPart\")\n\tlocal toHRP = toPlayer.Character:FindFirstChild(\"HumanoidRootPart\")\n\n\tif not fromHRP or not toHRP then\n\t\twarn(\"Teleport failed: HumanoidRootPart missing.\")\n\t\treturn\n\tend\n\n\tfromHRP.CFrame = toHRP.CFrame\nend)\n\n-- RemoteEvent for jump height change\nlocal jumpEvent = Instance.new(\"RemoteEvent\")\njumpEvent.Name = \"JumpHeightRequest\"\njumpEvent.Parent = ReplicatedStorage\n\njumpEvent.OnServerEvent:Connect(function(player, heightValue)\n\tif typeof(heightValue) ~= \"number\" then\n\t\twarn(\"Jump height must be a number.\")\n\t\treturn\n\tend\n\n\tif not player.Character or not player.Character:FindFirstChildOfClass(\"Humanoid\") then\n\t\twarn(\"Player has no valid character/humanoid.\")\n\t\treturn\n\tend\n\n\tlocal humanoid = player.Character:FindFirstChildOfClass(\"Humanoid\")\n\thumanoid.JumpHeight = heightValue\nend)\n\n-- RemoteEvent for speed change\nlocal speedEvent = Instance.new(\"RemoteEvent\")\nspeedEvent.Name = \"SpeedRequest\"\nspeedEvent.Parent = ReplicatedStorage\n\nspeedEvent.OnServerEvent:Connect(function(player, speedValue)\n\tif typeof(speedValue) ~= \"number\" then\n\t\twarn(\"Speed must be a number.\")\n\t\treturn\n\tend\n\n\tif not player.Character or not player.Character:FindFirstChildOfClass(\"Humanoid\") then\n\t\twarn(\"Player has no valid character/humanoid.\")\n\t\treturn\n\tend\n\n\tlocal humanoid = player.Character:FindFirstChildOfClass(\"Humanoid\")\n\thumanoid.WalkSpeed = speedValue\nend)\n\n-- RemoteEvent for invincibility toggle\nlocal invincibleEvent = Instance.new(\"RemoteEvent\")\ninvincibleEvent.Name = \"InvincibilityRequest\"\ninvincibleEvent.Parent = ReplicatedStorage\n\ninvincibleEvent.OnServerEvent:Connect(function(player)\n\tif not player.Character or not player.Character:FindFirstChildOfClass(\"Humanoid\") then\n\t\twarn(\"Player has no valid character/humanoid.\")\n\t\treturn\n\tend\n\n\tlocal humanoid = player.Character:FindFirstChildOfClass(\"Humanoid\")\n\thumanoid.Health = humanoid.MaxHealth\n\thumanoid:SetAttribute(\"Invincible\", true)\n\n\thumanoid:GetPropertyChangedSignal(\"Health\"):Connect(function()\n\t\tif humanoid:GetAttribute(\"Invincible\") then\n\t\t\thumanoid.Health = humanoid.MaxHealth\n\t\tend\n\tend)\nend)\n\n-- RemoteEvent for invisibility toggle\nlocal invisibilityEvent = Instance.new(\"RemoteEvent\")\ninvisibilityEvent.Name = \"InvisibilityRequest\"\ninvisibilityEvent.Parent = ReplicatedStorage\n\ninvisibilityEvent.OnServerEvent:Connect(function(player)\n\tif not player.Character then return end\n\tlocal isInvisible = player:GetAttribute(\"IsInvisible\")\n\n\tfor _, part in ipairs(player.Character:GetDescendants()) do\n\t\tif part:IsA(\"MeshPart\") or part:IsA(\"Part\") then\n\t\t\tif part.Name ~= \"HumanoidRootPart\" then\n\t\t\t\tpart.Transparency = isInvisible and 0 or 1\n\t\t\tend\n\t\telseif part:IsA(\"Decal\") then\n\t\t\tpart.Transparency = isInvisible and 0 or 1\n\t\telseif part:IsA(\"ParticleEmitter\") or part:IsA(\"Trail\") then\n\t\t\tpart.Enabled = not isInvisible\n\t\tend\n\tend\n\n\tplayer:SetAttribute(\"IsInvisible\", not isInvisible)\nend)\n"
ClientSideExecutions.Parent = AdminPanelServerScripts

AdminPanelServerScripts.Parent = game:GetService("ServerScriptService")
